<html>
<body>
	<textarea id="printContent"></textarea>
	<input type="submit" onclick="connectAndPrint()" value="Print"/>
	<P>Type text into box and click on submit button.
	<script>
	var device;

	function setup(device) {
		return device.open()
		.then(() => device.selectConfiguration(1))
		.then(() => device.claimInterface(0))
	}

	function print(rawData) {
		
		var encoder = new TextEncoder();
		var data = encoder.encode(rawData);
		console.log(data);
		console.log(rawData);
		device.transferOut(1, rawData)
		.catch(error => { console.log(error); })
	}

	function connectAndPrint() {
		var rawData = 'b"\e@FAKTUR PENJUALAN\e3\x10\e* x\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01ð\x00\x0Fþ\x00?ÿ\x00ü\x0F\x01à\x01\x01À\x00\x03€\x00\x07\x00\x00\x07\x00\x00\x0E\f\x00\x0E\f\x00\f\f\x00\f\f\x00\f\x0Eø\f\x0Fü\f\x0Fü\f\x0Fü\f\x0E\x00\f\f\x00\f\f\x00\f\f\x00\f\f\x00\f\x00\x00\f\x07ü\f\x0Fü\f\x0Fü\f\x0Fü\f\x00\x00\f\x00\x00\f\x01\x00\f\x01ü\f\x01ü\f\x00\x00\f\x00\x00\f\x03ü\f\x07ü\f\x03ü\f\x03ø\f\x00\x00\f\x0Fü\f\x0Fü\f\x0Fü\f\x00\x00\f\x00\x00\f\x00`\f\x00ø\f\x01ø\f\x01ü\f\x03œ\f\x03\f\f\x03\x04\f\x03\f\f\x03œ\f\x01ü\f\x01ü\f\x00ø\f\x00\x00\f\x00\x00\f\x00|\f\x01ü\f\x01ü\f\x01€\f\x03€\f\x03€\f\x03\x00\f\x00\x00\f\x00\x00\f\tü\f\x0Fü\fü\f\x00ø\f\x00\x00\f\x0Fü\f\x0Fü\f\x0Fü\f\x03\f\f\x03\f\f\x00\x04\f\x00\x00\f\x00ø\f\x01ø\f\x01ü\f\x03ü\f\x03l\f\x03l\f\x03,\f\x03ì\f\x03ì\f\x01Ü\f\x00è\f\x00@\f\x00\x00\f\x07ü\x0E\x0Fü\x0E\x0Fü\x07\x00\x00\x07\x00\x00\x03€\x00\x01à\x00\x00à\x01\x00|\x07\x00?ÿ\x00\x0Fþ\x00\x01ð\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\e* x\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00€\x00\x00À\x00\x00à\x00\x00ð\x00\x00x\x00\x008\x00\x00\x1C\x00\x00\x1C\x00\x00\f\x00\x00\x0E\x00\x00\f\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\x0E\x00\x00\f\x00\x00\x0E\x00\x00\f\x00\x00\x1C\x00\x00\x1C\x00\x008\x00\x00x\x00\x00ð\x00\x00à\x00\x00À\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\e2\x1DVA\x03';
		if (device == null) {
			navigator.usb.requestDevice({ filters: [{ vendorId: 1208 }] })
			.then(selectedDevice => {
				device = selectedDevice;
				console.log(device);
				return setup(device);
			})
			.then(() => print(rawData))
			.catch(error => { console.log(error); })
		}
		else
			print(rawData);
	}

	navigator.usb.getDevices()
	.then(devices => {
		if (devices.length > 0) {
			device = devices[0];
			return setup(device);
		}
	})
	.catch(error => { console.log(error); });

	</script>
</body>
</html>

